{%extends "reg_jounals/index.html" %}
{%load static%}
{%block title%}Заявления на увольнение{%endblock%}
{%block header%}<a class="button back" href="../">
  < назад</a>{%block logo%}{{block.super}}{%endblock%} Журнал регистрации заявлений на увольнение.{%endblock%}
    {%block content%}

    <div class="standart-menu">
      <a class="button add" href="{%url 'letter_resignation_add_url' %}">Добавить</a>


      <div class="standart-menu-submenu-container">
        <img src="{% static '/img/filter.png' %}" onclick="open_search_menu(this, 'letters-of-resignation-search-menu')"
          alt="">
      </div>

    </div>

    <form id="letters-of-resignation-search-menu" class="standart-panel search panel" style="display: none;" action="{% url 'resignation' %}">
      <div class="search-panel-input-group">
        <input type="search" name="lor_search" placeholder="ФИО">
      </div>

      <div class="search-panel-input-group">
        <div class="search-panel-input-group-header">
          <h5>Период:</h5>
        </div>
        <input type="date" name="letters-of-resignation-search-from" id="">
        <input type="date" name="letters-of-resignation-search-to" id="">
      </div>

      <div class="search-panel-input-group">
        <div class="search-panel-input-group-header">
          <h5>Дата увольнения:</h5>
        </div>
        <input type="date" name="letters-of-resignation-search-date" id="">
      </div>

      <div class="search-panel-input-group">
        <select class="" name="letters-of-resignation-search-department">
          <option value="">Подразделение</option>
          {%for dep in deps%}
          <option value="{{dep.id}}">{{dep}}</option>
          {%endfor%}
        </select>
      </div>

      <div class="search-panel-input-group">
        <button class="button add" type="submit" name="" value="Найти">Найти</button>
        <a class="button cancel" href=".">Сбросить</a>
      </div>
    </form>

    <!-- <button class="btn btn-success btn-lg m-bottom btn-add " type="button" name="button" onclick="open_frame_new()"> + Добавить</button> -->
    {% if letters %}
    <table>
      <thead class="thead-dark">
        <tr class="tr-header">
          <th scope="col">Номер</th>
          <th scope="col">Дата поступления</th>
          <th scope="col">Увольняемый</th>
          <!-- <th scope="col">Должность</th> -->
          <th scope="col">Подразделение</th>
          <th scope="col">Дата увольнения</th>
          <th scope="col">Основание увольнения</th>
          <th scope="col">Примечание</th>
          <th scope="col">Ответственный сотрудник</th>

        </tr>
      </thead>

      {%for let in letters.object_list%}

      <tr onclick="return location.href = '{% url 'letter_resignation_upd_url' id=let.id%}' ">
        <!-- <tr id="{{let.id}}" onclick="open_for_upd({{let.id}})"> -->

        <td id="number">{{let.lor_number}}</td>
        <td id="date">{{let.lor_date|date:"d.m.Y"}}</td>
        <td id="emloyer">{{let.lor_employee}}</td>
        <!-- <td id="pos">{{let.lor_position}}</td> -->
        <td id="dep">{{let.lor_departament}}</td>
        <td id="dateRes">{{let.lor_dateOfRes|date:"d.m.Y"}}</td>
        <td class="table-non-wrap" id="content">{{let.lor_itemOfRes| truncatechars:15}}</td>
        <td id="content">{{let.lor_additionalData | truncatechars:15}}</td>
        <td class="table-non-wrap" id="res_officer">{{let.lor_res_officer}}</td>

      </tr>
      {%endfor%}
    </table>

    <nav class="paginator" aria-label="Page navigation example">
      <ul class="pagination">
        <li class="page-item">
          <a class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        {% for p in letters.paginator.page_range %}
        {% if letters.number == p%}
        <li class="page-item active"><a class="page-link" href="?page={{p}}">{{ p }}</a></li>
        {%else%}
        <li class="page-item"><a class="page-link" href="?page={{p}}">{{ p }}</a></li>
        {%endif%}
        {% endfor %}

        {%if letters.has_next%}
        <li class="page-item">
          <a class="page-link" href='?page={{letters.next_page_number}}' aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
        {%else%}
        <li class="page-item disabled">
          <a class="page-link" href='#' aria-disabled='true' aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
        {%endif%}
      </ul>
    </nav>



    {%else%}
    <h2>Записей нет</h2>
    {%endif%}

    {%endblock%}