{% extends 'TURV/index.html'%}

{%block title%}–û—Ç–∑—ã–≤—ã{% endblock %}

{%block header%}  <a class="btn btn-dark" href=".."> < –ù–∞–∑–∞–¥ </a> | {% if request.user.is_superuser %}–ö–Ω–∏–≥–∞ –∂–∞–ª–æ–± –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π {% else %} –ú–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è {% endif %} {%endblock%}

{% block body %}

<div class="container">
  {% if request.user.is_superuser %}
      <form class="info-block ib-feedbacks" action="{% url 'feedbacks_url' %}" method="post">
        {% csrf_token %}
          <p>–¢–æ–ª—å–∫–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ: <span><input type="checkbox" name="unreaded_only" value="1"></span></p>

          <input type="submit" class="btn btn-dark btn-sm" name="" value="–ù–∞–π—Ç–∏">


    </form>
    {%else%}
    {%endif%}
  <a class="btn btn-success btn-add"  onclick="return location.href = '{% url 'feedback_new_url' id=0%}' "  >+ –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</a>

{%if feedbacks %}

<table>
  <thead class="thead-dark">
  <tr class="tr-header">



    <th scope="col">–ö–æ–¥</th>
    <th scope="col">–í–∏–¥</th>
    <th scope="col">–î–∞—Ç–∞</th>
    <th scope="col">–¢–µ–º–∞</th>
    {% if request.user.is_superuser %}
    <th scope="col">–û—Ç</th>
    {%endif%}
    <th scope="col">–ü—Ä–æ—á–∏—Ç–∞–Ω–æ</th>
    <th scope="col">–ü—Ä–∏–Ω—è—Ç–æ –≤ —Ä–∞–±–æ—Ç—É</th>
    <th scope="col">–û—Ç–≤–µ—Ç</th>






  </tr >
  </thead>

  {% for feed in feedbacks %}

  <tr   onclick="return location.href = '{% url 'feedback_new_url' id=feed.id%}'" >




    <td>{{feed.id}}</td>
    <td>{{feed.type}}</td>
    <td>{{feed.date}}</td>
    <td>{{feed.about}}</td>
      {% if request.user.is_superuser %}
    <td>{{feed.mes_from.first_name}}</td>
    {%endif%}
    {% if feed.readed %}
    <td>‚úÖ</td>
    {% else %}
    <td>‚ùå</td>
    {% endif %}
    {% if feed.inwork %}
    <td>‚úÖ</td>
    {% else %}
    <td>‚ùå</td>
    {% endif %}
    {%if feed.answer %}
      {% if feed.answer_readed %}
        <td>üü¢ –ü—Ä–æ—á–∏—Ç–∞–Ω {%if request.user.is_superuser%}–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {%else%}–í–∞–º–∏ {%endif%}</td>
      {%else%}
        <td>üü° –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω {%if request.user.is_superuser%}–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {%else%}–í–∞–º–∏ {%endif%}</td>
      {%endif%}
    {%else%}
      <td>üîò –ü–æ–∫–∞ –Ω–µ—Ç</td>
    {%endif%}


  </tr>
  {%endfor%}
</table>

<nav  class="paginator" aria-label="Page navigation example">
  <ul class="pagination">
    {%if feedbacks.has_previous%}
        <li class="page-item">
          <a class="page-link" aria-label="previous" href="?page=1">
              <span aria-hidden="true">–ü–µ—Ä–≤–∞—è</span></a>
        </li>
        <li class="page-item">
          <a class="page-link" href='?page={{feedbacks.previous_page_number}}' aria-label="previous">
    <span aria-hidden="true">{{feedbacks.previous_page_number}}</span>
          </a>
        </li>
  {%endif%}

   <li class="page-item active"><a class="page-link" href="">{{ feedbacks.number }}</a></li>

{%if feedbacks.has_next%}
    <li class="page-item">
      <a class="page-link" href='?page={{feedbacks.next_page_number}}' aria-label="Next">{{feedbacks.next_page_number}}</a>
      </li>
  {%endif%}

  <li class="page-item">
  <a class="page-link" href="?page={{ feedbacks.paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è</a>
  </li>
</ul>
</nav>

{%else%}
<h2>–°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</h2>
{%endif%}
</div>
{%endblock%}
